---
name: wetrace
description: "å¾®ä¿¡èŠå¤©è®°å½•åˆ†æåŠ©æ‰‹ï¼Œç”¨äºæŸ¥è¯¢ã€åˆ†æå’Œå¯¼å‡ºæœ¬åœ°å¾®ä¿¡æ•°æ®åº“ä¸­çš„èŠå¤©æ•°æ®ã€‚é€‚ç”¨åœºæ™¯ï¼š(1) æŸ¥çœ‹ä¸ç‰¹å®šè”ç³»äººæˆ–ç¾¤ç»„çš„èŠå¤©æ¶ˆæ¯ï¼Œ(2) é€šè¿‡å…³é”®è¯æœç´¢è·¨ä¼šè¯æ¶ˆæ¯ï¼Œ(3) åˆ†æèŠå¤©æ¨¡å¼ã€æ´»è·ƒåº¦è¶‹åŠ¿æˆ–å…³ç³»åŠ¨æ€ï¼Œ(4) å¯¼å‡ºå¤šç§æ ¼å¼çš„èŠå¤©è®°å½•ï¼ˆHTML/PDF/DOCX/CSV/XLSXï¼‰ï¼Œ(5) è·å–ç¤¾äº¤äº’åŠ¨å’Œæ²Ÿé€šä¹ æƒ¯çš„æ´å¯Ÿï¼Œ(6) ç®¡ç†å®¢æˆ·å…³ç³»å’Œè·Ÿè¿›æé†’ï¼Œ(7) ç”Ÿæˆå¹´åº¦æŠ¥å‘Šæˆ–ç»Ÿè®¡æ•°æ®ï¼Œ(8) ç”Ÿæˆç²¾ç¾çš„å¯è§†åŒ– HTML é¡µé¢ã€‚è§¦å‘è¯ï¼šwetraceã€å¾®ä¿¡ã€èŠå¤©è®°å½•ã€wechatã€åˆ†æèŠå¤©ã€å¯¼å‡ºèŠå¤©ã€ç”ŸæˆæŠ¥å‘Šã€ç”Ÿæˆä»ªè¡¨æ¿ï¼Œæˆ–ä»»ä½•æ¶‰åŠå¾®ä¿¡èŠå¤©æ•°æ®åˆ†æã€æ¶ˆæ¯æœç´¢æˆ–å…³ç³»æ´å¯Ÿçš„è¯·æ±‚ã€‚"
compatibility: "ä»…æ”¯æŒ Windows å¹³å°ã€‚ä¾èµ– Wetrace æœåŠ¡ (https://github.com/afumu/wetrace) è¿è¡Œåœ¨ http://127.0.0.1:5200"
---

# å¾®ä¿¡æ•°æ®åˆ†æåŠ©æ‰‹

æŸ¥è¯¢ã€åˆ†æå’Œå¯¼å‡ºå¾®ä¿¡èŠå¤©æ•°æ®ï¼Œæä¾› AI é©±åŠ¨çš„æ™ºèƒ½æ´å¯Ÿå’Œç²¾ç¾çš„å¯è§†åŒ–é¡µé¢ã€‚

> **âš ï¸ é‡è¦æç¤º**
> - æœ¬ Skill ä¾èµ– [Wetrace](https://github.com/afumu/wetrace) æœåŠ¡
> - **ä»…æ”¯æŒ Windows å¹³å°**ï¼ˆå¾®ä¿¡æ•°æ®åº“ä½äº Windows ç³»ç»Ÿï¼‰
> - éœ€è¦å…ˆå®‰è£…å¹¶è¿è¡Œ Wetrace æœåŠ¡æ‰èƒ½ä½¿ç”¨æœ¬ Skill

## å‰ç½®æ¡ä»¶

- **Wetrace æœåŠ¡**ï¼šå¿…é¡»å…ˆå®‰è£…å¹¶è¿è¡Œ [Wetrace](https://github.com/afumu/wetrace)
- **æœåŠ¡åœ°å€**ï¼šWetrace æœåŠ¡è¿è¡Œåœ¨ `http://127.0.0.1:5200`
- **å¾®ä¿¡æ•°æ®åº“**ï¼šå·²è§£å¯†å¹¶åŠ è½½
- **æ“ä½œç³»ç»Ÿ**ï¼šWindows 10/11
- å¦‚æœæœåŠ¡æœªè¿è¡Œï¼Œå…ˆæç¤ºç”¨æˆ·å¯åŠ¨ Wetrace æœåŠ¡

## æ ¸å¿ƒå·¥ä½œæµç¨‹

### 1. ç†è§£ç”¨æˆ·æ„å›¾

å°†ç”¨æˆ·è¯·æ±‚åˆ†ç±»ä¸ºä»¥ä¸‹ç±»åˆ«ï¼š

- **æŸ¥è¯¢ï¼ˆQueryï¼‰**ï¼šæŸ¥çœ‹æ¶ˆæ¯ã€ä¼šè¯ã€è”ç³»äººã€ç¾¤èŠ
- **æœç´¢ï¼ˆSearchï¼‰**ï¼šé€šè¿‡å…³é”®è¯æŸ¥æ‰¾æ¶ˆæ¯
- **åˆ†æï¼ˆAnalysisï¼‰**ï¼šåˆ†ææ¨¡å¼ã€ç”Ÿæˆç»Ÿè®¡æ•°æ®
- **å¯¼å‡ºï¼ˆExportï¼‰**ï¼šå¯¼å‡ºå¤šç§æ ¼å¼çš„æ•°æ®
- **æ´å¯Ÿï¼ˆInsightï¼‰**ï¼šç»¼åˆåˆ†æå¹¶æä¾›å»ºè®®
- **å¯è§†åŒ–ï¼ˆVisualizationï¼‰**ï¼šç”Ÿæˆç²¾ç¾çš„ HTML é¡µé¢

### 2. æå–å‚æ•°

ä»ç”¨æˆ·è¯·æ±‚ä¸­è¯†åˆ«å…³é”®å‚æ•°ï¼š
- **è”ç³»äººåç§°**ï¼šæå–äººåæˆ–ç¾¤å
- **æ—¶é—´èŒƒå›´**ï¼šæå–æ—¶é—´æ®µ
- **å…³é”®è¯**ï¼šæå–æœç´¢è¯
- **æ ¼å¼**ï¼šæå–å¯¼å‡ºæ ¼å¼

### 3. è°ƒç”¨ API

æœ¬ Skill æä¾›äº† Python è„šæœ¬å·¥å…·æ¥è°ƒç”¨ Wetrace APIï¼Œæ¯”ç›´æ¥ä½¿ç”¨ WebFetch æ›´æ–¹ä¾¿ã€‚

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Python è„šæœ¬ï¼ˆæ¨èï¼‰

ä½¿ç”¨ `wetrace_api.py` è„šæœ¬ï¼Œä½äº `scripts/wetrace_api.py`ï¼š

```bash
# æŸ¥è¯¢ä¼šè¯
python scripts/wetrace_api.py sessions --keyword "å¼ ä¸‰" --limit 20

# è·å–æ¶ˆæ¯
python scripts/wetrace_api.py messages --talker wxid_abc123 --limit 50

# æœç´¢å…³é”®è¯
python scripts/wetrace_api.py search --keyword "é¡¹ç›®" --limit 30

# åˆ†ææ•°æ®
python scripts/wetrace_api.py analysis hourly wxid_abc123
python scripts/wetrace_api.py analysis daily wxid_abc123

# å¯¼å‡ºèŠå¤©è®°å½•
python scripts/wetrace_api.py export chat --talker wxid_abc123 --format html
```

**å®Œæ•´è„šæœ¬æ–‡æ¡£**ï¼šæŸ¥çœ‹ [scripts/README.md](scripts/README.md)

#### æ–¹å¼äºŒï¼šç›´æ¥è°ƒç”¨ API

åŸºç¡€ URLï¼š`http://127.0.0.1:5200/api/v1`

**å®Œæ•´ API æ–‡æ¡£**ï¼šå‚è€ƒ [references/api.md](references/api.md)

#### å¸¸ç”¨ API æ¨¡å¼

```
GET /sessions?keyword={åç§°}&limit=50
GET /messages?talker_id={id}&time_range={èŒƒå›´}&limit=100
GET /search?keyword={å…³é”®è¯}&time_range={èŒƒå›´}&limit=50
GET /analysis/hourly/{session_id}
GET /analysis/daily/{session_id}
GET /export/chat?talker={id}&format={æ ¼å¼}&time_range={èŒƒå›´}
```

### 4. å¤„ç†å’Œå‘ˆç°æ•°æ®

#### ç®€å•æŸ¥è¯¢/æœç´¢

ä»¥æ¸…æ™°ã€ç»“æ„åŒ–çš„æ ¼å¼å‘ˆç°æ•°æ®ã€‚

#### åˆ†æä»»åŠ¡

1. ä»åˆ†æ API è·å–åŸå§‹æ•°æ®
2. ä½¿ç”¨ [references/analysis-prompts.md](references/analysis-prompts.md) ä¸­çš„æ¨¡æ¿ç”Ÿæˆ AI æ€»ç»“
3. ä»¥æ¸…æ™°çš„ç»“æ„å‘ˆç°

#### å¯¼å‡ºä»»åŠ¡

è°ƒç”¨å¯¼å‡º APIï¼Œå‘ŠçŸ¥ç”¨æˆ·ä¸‹è½½ä¿¡æ¯ã€‚

#### æ´å¯Ÿä»»åŠ¡

1. ä»å¤šä¸ª API æ”¶é›†æ•°æ®
2. ç»¼åˆä¿¡æ¯
3. ç”Ÿæˆå…¨é¢çš„æ´å¯Ÿå’Œå»ºè®®
4. ä½¿ç”¨ analysis-prompts.md ä¸­çš„é€‚å½“æ¨¡æ¿

### 5. é”™è¯¯å¤„ç†

- **API è¿”å› 404**ï¼šæ•°æ®åº“å¯èƒ½æœªåŠ è½½ï¼Œè”ç³»äºº/ä¼šè¯å¯èƒ½ä¸å­˜åœ¨
- **API è¿”å› 500**ï¼šæœåŠ¡å™¨é”™è¯¯ï¼Œå»ºè®®æ£€æŸ¥æ—¥å¿—
- **æ— æ•°æ®è¿”å›**ï¼šéªŒè¯æ—¶é—´èŒƒå›´å’Œè”ç³»äººåç§°
- **æœåŠ¡å™¨æ— å“åº”**ï¼šæç¤ºç”¨æˆ·å¯åŠ¨ Wetrace æœåŠ¡

## ğŸ¨ æ™ºèƒ½ç½‘é¡µç”ŸæˆåŠŸèƒ½

Wetrace æä¾› 8 ä¸ªæ ¸å¿ƒå¯è§†åŒ–åŠŸèƒ½ï¼Œæ¯ä¸ªåŠŸèƒ½éƒ½ä¼šï¼š
1. è°ƒç”¨ Wetrace API è·å–æ•°æ®
2. ä½¿ç”¨ AI åˆ†æç”Ÿæˆæ€»ç»“
3. ä½¿ç”¨ç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿç”Ÿæˆç²¾ç¾çš„ HTML é¡µé¢
4. ä¿å­˜ HTML æ–‡ä»¶åˆ° `~/wetrace-exports/` å¹¶æä¾›è®¿é—®é“¾æ¥

### å¯ç”¨çš„å¯è§†åŒ–åŠŸèƒ½

å½“ç”¨æˆ·è¯·æ±‚ç”Ÿæˆå¯è§†åŒ–é¡µé¢æ—¶ï¼Œæ ¹æ®è§¦å‘å…³é”®è¯é€‰æ‹©å¯¹åº”çš„åŠŸèƒ½ï¼š

1. **æ™ºèƒ½æ‘˜è¦ç”Ÿæˆ** - è§¦å‘è¯ï¼šæ€»ç»“èŠå¤©è®°å½•ã€ç”Ÿæˆæ‘˜è¦ã€æ™ºèƒ½æ€»ç»“
   - è¯¦è§ [references/01-smart-summary.md](references/01-smart-summary.md)

2. **å¾…åŠäº‹é¡¹æå–** - è§¦å‘è¯ï¼šæå–å¾…åŠã€æ‰¾å‡ºä»»åŠ¡ã€å¾…åŠäº‹é¡¹
   - è¯¦è§ [references/02-todo-extraction.md](references/02-todo-extraction.md)

3. **èŠå¤©æ´»è·ƒåº¦çƒ­åŠ›å›¾** - è§¦å‘è¯ï¼šæ´»è·ƒåº¦çƒ­åŠ›å›¾ã€èŠå¤©æ—¶é—´åˆ†å¸ƒ
   - è¯¦è§ [references/03-activity-heatmap.md](references/03-activity-heatmap.md)

4. **äº’åŠ¨è¶‹åŠ¿åˆ†æ** - è§¦å‘è¯ï¼šè¶‹åŠ¿åˆ†æã€äº’åŠ¨è¶‹åŠ¿
   - è¯¦è§ [references/04-trend-analysis.md](references/04-trend-analysis.md)

5. **æ™ºèƒ½å‘¨æŠ¥æœˆæŠ¥** - è§¦å‘è¯ï¼šç”Ÿæˆå‘¨æŠ¥ã€ç”ŸæˆæœˆæŠ¥
   - è¯¦è§ [references/05-weekly-monthly-report.md](references/05-weekly-monthly-report.md)

6. **æ•°æ®ä»ªè¡¨æ¿** - è§¦å‘è¯ï¼šç”Ÿæˆä»ªè¡¨æ¿ã€æ•°æ®æ€»è§ˆ
   - è¯¦è§ [references/06-dashboard.md](references/06-dashboard.md)

7. **æ™ºèƒ½å¯¹è¯æ‘˜è¦** - è§¦å‘è¯ï¼šå¯¹è¯æ‘˜è¦ã€æ™ºèƒ½æ€»ç»“ã€åˆ†ç±»æ‘˜è¦
   - è¯¦è§ [references/07-conversation-summary.md](references/07-conversation-summary.md)

8. **å®¢æˆ·å…³ç³»å¥åº·åº¦** - è§¦å‘è¯ï¼šå®¢æˆ·å¥åº·åº¦ã€CRM ä»ªè¡¨æ¿
   - è¯¦è§ [references/08-customer-health.md](references/08-customer-health.md)

### è®¾è®¡ç³»ç»Ÿ

æ‰€æœ‰ç”Ÿæˆçš„ HTML é¡µé¢éƒ½éµå¾ªç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿï¼Œè¯¦è§ [references/design-system.md](references/design-system.md)ï¼ŒåŒ…æ‹¬ï¼š
- é¢œè‰²ç³»ç»Ÿï¼šåŸºäº HSL çš„ CSS å˜é‡
- ç»„ä»¶åº“ï¼šCardã€Badgeã€Buttonã€Separatorã€Input ç­‰
- å¸ƒå±€ç³»ç»Ÿï¼šå“åº”å¼å®¹å™¨å’Œç»Ÿä¸€é—´è·
- æ•°æ®å¯è§†åŒ–ï¼šChart.js é…ç½®å’Œé¢œè‰²æ–¹æ¡ˆ

### HTML é¡µé¢ç‰¹ç‚¹

æ‰€æœ‰ç”Ÿæˆçš„ HTML é¡µé¢ï¼š
- âœ… **ç‹¬ç«‹è¿è¡Œ**ï¼šæ— éœ€æœåŠ¡å™¨ï¼ŒåŒå‡»å³å¯åœ¨æµè§ˆå™¨æ‰“å¼€
- âœ… **å“åº”å¼è®¾è®¡**ï¼šé€‚é…æ‰€æœ‰è®¾å¤‡ï¼ˆæ¡Œé¢/å¹³æ¿/æ‰‹æœºï¼‰
- âœ… **ç°ä»£åŒ–æ ·å¼**ï¼šä½¿ç”¨ Tailwind CSS
- âœ… **äº¤äº’å¼å›¾è¡¨**ï¼šä½¿ç”¨ Chart.js å®ç°æ•°æ®å¯è§†åŒ–
- âœ… **æ¸…æ™°å±‚æ¬¡**ï¼šå¡ç‰‡å¸ƒå±€ã€ç»Ÿä¸€é—´è·ã€è¯­ä¹‰åŒ–é¢œè‰²
- âœ… **æ˜“äºåˆ†äº«**ï¼šå¯ç›´æ¥å‘é€ç»™ä»–äººæŸ¥çœ‹

### ä½¿ç”¨æµç¨‹

å½“ç”¨æˆ·è¯·æ±‚ç”Ÿæˆç½‘é¡µæ—¶ï¼š

1. **è¯†åˆ«åŠŸèƒ½**ï¼šæ ¹æ®è§¦å‘å…³é”®è¯åŒ¹é…å¯¹åº”çš„åŠŸèƒ½
2. **è¯»å–è¯¦ç»†æ–‡æ¡£**ï¼šä» references ç›®å½•è¯»å–å¯¹åº”çš„ .md æ–‡ä»¶
3. **æ”¶é›†å‚æ•°**ï¼šè¯¢é—®ç”¨æˆ·å¿…è¦çš„å‚æ•°ï¼ˆä¼šè¯ IDã€æ—¶é—´èŒƒå›´ç­‰ï¼‰
4. **è°ƒç”¨ API**ï¼šè·å–æ‰€éœ€æ•°æ®
5. **AI åˆ†æ**ï¼šä½¿ç”¨ analysis-prompts.md ä¸­çš„æ¨¡æ¿ç”Ÿæˆæ€»ç»“
6. **ç”Ÿæˆ HTML**ï¼šä½¿ç”¨ design-system.md é£æ ¼ç”Ÿæˆç²¾ç¾é¡µé¢
7. **ä¿å­˜æ–‡ä»¶**ï¼šä¿å­˜åˆ° `~/wetrace-exports/` ç›®å½•
8. **æä¾›é“¾æ¥**ï¼šè¿”å›æ–‡ä»¶è·¯å¾„å’Œè®¿é—®é“¾æ¥

## é«˜çº§åŠŸèƒ½

### æ—¶é—´èŒƒå›´è§£æ

æ”¯æŒå¤šç§æ ¼å¼ï¼š
- ä¸­æ–‡ï¼šæœ€è¿‘ä¸€å‘¨ã€ä¸Šä¸ªæœˆã€ä»Šå¹´
- è‹±æ–‡ï¼šlast weekã€last monthã€this year
- ç»å¯¹æ—¶é—´ï¼š2024-01-01~2024-01-31
- ç›¸å¯¹å¤©æ•°ï¼šlast 7 daysã€last 30 days

è½¬æ¢ä¸º API æ ¼å¼ï¼š`YYYY-MM-DD~YYYY-MM-DD`

### è”ç³»äººåç§°åŒ¹é…

1. é¦–å…ˆåœ¨ä¼šè¯ä¸­å°è¯•ç²¾ç¡®åŒ¹é…
2. å¦‚æœªæ‰¾åˆ°ï¼Œåœ¨è”ç³»äººä¸­æœç´¢
3. å¦‚æœ‰å¤šä¸ªåŒ¹é…ï¼Œè¯·ç”¨æˆ·æ˜ç¡®
4. åŒæ—¶æ”¯æŒæ˜µç§°ï¼ˆNickNameï¼‰å’Œå¤‡æ³¨ï¼ˆRemarkï¼‰å­—æ®µ

### åˆ†é¡µç­–ç•¥

å¯¹äºå¤§æ•°æ®é›†ï¼š
1. ä» `limit=50` å¼€å§‹
2. å¦‚ç”¨æˆ·éœ€è¦æ›´å¤šï¼Œå¢åŠ  limit æˆ–ä½¿ç”¨ offset
3. å‘ŠçŸ¥ç”¨æˆ·æ€»æ•°
4. å¦‚æ•°æ®é›†éå¸¸å¤§ï¼Œå»ºè®®å¯¼å‡º

## ä½¿ç”¨æç¤º

- è°ƒç”¨ API å‰å§‹ç»ˆéªŒè¯æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
- ä½¿ç”¨é€‚å½“çš„åˆ†ææ¨¡æ¿ä»¥ä¿æŒè¾“å‡ºä¸€è‡´æ€§
- æä¾›å¯æ“ä½œçš„æ´å¯Ÿï¼Œè€Œä¸ä»…ä»…æ˜¯åŸå§‹ç»Ÿè®¡æ•°æ®
- å°Šé‡ç”¨æˆ·éšç§ - ä¸è¦å¯¹å…³ç³»åšå‡ºå‡è®¾
- æä¾›åç»­æ­¥éª¤æˆ–è·Ÿè¿›è¡ŒåŠ¨
- åŒç­‰å¤„ç†ä¸­æ–‡å’Œè‹±æ–‡æŸ¥è¯¢
- **ç”Ÿæˆ HTML é¡µé¢æ—¶**ï¼šå§‹ç»ˆå‚è€ƒ design-system.md çš„è®¾è®¡ç³»ç»Ÿ
- **æ–‡ä»¶ä¿å­˜ä½ç½®**ï¼šç»Ÿä¸€ä¿å­˜åˆ° `~/wetrace-exports/` ç›®å½•
- **æä¾›è®¿é—®é“¾æ¥**ï¼šç”Ÿæˆå®Œæˆåæä¾› `file://` åè®®çš„å®Œæ•´è·¯å¾„

## ğŸ Python è„šæœ¬å·¥å…·

### å¿«é€Ÿä½¿ç”¨

è„šæœ¬ä½ç½®ï¼š`scripts/wetrace_api.py`

#### å®‰è£…ä¾èµ–

```bash
cd scripts
pip install -r requirements.txt
```

#### å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹å¸®åŠ©
python wetrace_api.py --help

# æŸ¥è¯¢ä¼šè¯
python wetrace_api.py sessions --keyword "å¼ ä¸‰" --limit 20

# è·å–æ¶ˆæ¯ï¼ˆéœ€è¦ä¼šè¯IDï¼‰
python wetrace_api.py messages --talker wxid_abc123 --limit 50

# æŒ‰æ—¶é—´èŒƒå›´æŸ¥è¯¢
python wetrace_api.py messages --talker wxid_abc123 --time-range "2024-01-01~2024-01-31"

# å…¨æ–‡æœç´¢
python wetrace_api.py search --keyword "é¡¹ç›®" --limit 30

# æ•°æ®åˆ†æ
python wetrace_api.py analysis hourly wxid_abc123
python wetrace_api.py analysis daily wxid_abc123
python wetrace_api.py analysis type wxid_abc123

# è·å–æ€»è§ˆ
python wetrace_api.py dashboard

# å¯¼å‡ºèŠå¤©è®°å½•
python wetrace_api.py export chat --talker wxid_abc123 --format html
```

### åœ¨ä»£ç ä¸­ä½¿ç”¨

```python
from scripts.wetrace_api import WetraceAPI

# åˆ›å»ºAPIå®¢æˆ·ç«¯
api = WetraceAPI()

# æŸ¥è¯¢ä¼šè¯
sessions = api.get_sessions(keyword="å¼ ä¸‰", limit=10)
for session in sessions:
    print(f"{session['NickName']}: {session['MessageCount']} æ¡æ¶ˆæ¯")

# è·å–æ¶ˆæ¯
messages = api.get_messages(talker_id="wxid_abc123", limit=50)
for msg in messages:
    print(f"[{msg['CreateTime']}] {msg['Content']}")

# æœç´¢
result = api.search(keyword="é¡¹ç›®", limit=20)
print(f"æ‰¾åˆ° {result['Total']} æ¡ç›¸å…³æ¶ˆæ¯")
```

**å®Œæ•´æ–‡æ¡£**ï¼šæŸ¥çœ‹ [scripts/README.md](scripts/README.md)
